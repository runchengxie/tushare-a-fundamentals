# Loading .env (if available)
dotenv_if_exists .env

# Auto-reload on key files change
watch_file pyproject.toml
watch_file uv.lock
watch_file .env

VENV="$PWD/.venv"

# Ensure .venv exists (prefer uv)
if [ ! -d "$VENV" ]; then
  if command -v uv >/dev/null 2>&1; then
    uv venv
    uv sync
  else
    python3 -m venv "$VENV"
  fi
fi

# Expose virtualenv and add bin to PATH
export VIRTUAL_ENV="$VENV"
PATH_add "$VENV/bin"